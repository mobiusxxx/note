## moba ai

moba游戏相对于其他游戏，其数据量要求很大，控制很复杂，是一个多agent合作竞争的一个情况。我们在对其建模时，考虑的要足够周全，才能有好的效果。因为数据量大，我们要想办法去减少计算量；控制很复杂，我们就要将连续动作给离散化，让我们好去控制；多agent的一个情况，我们可以先从1v1开始，先和游戏规则进行一个交互，再去进行一个self—play。

## 构建流程

1.搭建环境，也就是对游戏内除英雄外，其他所有东西的一个建模，比如防御塔，小兵，草丛等

2.创建多个agent，得以让agent可以和环境进行一个交互。对于不同场景下，可以加入我们实际的经验，已减少计算量

3.设定action mask和reward，并从状态中获得：1.矢量信息，即杀人数，死亡数等数字信息 2.英雄周边的局部图片信息3.小地图的图片信息，将这些信息一同放入经验池 

4.搭建RL模型，这里需要引入action mask，以减少计算量；引入注意力机制，来选择攻击目标；引入LSTM来组合技能combo

5.从经验池读取经验，先对数据进行一个编码，将3个部分的信息一同输入策略网络中，去进行预测。在这里我们将策略分为宏观策略（对应游戏意识，也就是我们对游戏的一个整体走向的判断）和微观策略（对应游戏操作，就是我们具体该进行那些操作，去按那些按钮）。将我们执行的动作分两层，第一层：我们执行那个按钮，第二层：怎么执行那个按钮，这一层叫要包含注意力机制。

6.将动作传给agent，进行循环。

![image-20211227150130226](C:\Users\longyuan\AppData\Roaming\Typora\typora-user-images\image-20211227150130226.png)

![image-20211227150351373](C:\Users\longyuan\AppData\Roaming\Typora\typora-user-images\image-20211227150351373.png)

